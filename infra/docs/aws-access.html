<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AWS access for team members - Rust Forge</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Supplemental documentation for contributing to The Rust Programming Language">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Forge</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/rust-forge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/rust-forge/edit/master/src/infra/docs/aws-access.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="aws-access-for-team-members"><a class="header" href="#aws-access-for-team-members">AWS access for team members</a></h1>
<p>Selected members of the Rust Team have access to the AWS account of the
project. This includes both members of the Infrastructure Team and members of
teams with services hosted on AWS.</p>
<p>This document explains how to access our AWS account, and how to interact with
it. If you’re a infrastructure team member and you need to setup or revoke
access for another person, read the <a href="./aws-access-management.html">“AWS access
management”</a> page.</p>
<h2 id="setting-up-your-user-after-receiving-the-credentials"><a class="header" href="#setting-up-your-user-after-receiving-the-credentials">Setting up your user after receiving the credentials</a></h2>
<p>The first thing you need to do after receiving your credentials is changing the
password and enabling 2-factor authentication: until you do these things,
access will be restricted automatically to just the permissions needed to
configure 2FA.</p>
<p><a href="https://rust-lang.signin.aws.amazon.com/console">Sign into the console</a> with the temporary credentials given to
you by the infrastructure team member who created the user. You’ll be prompted
to change the temporary password: change it and log in again. Then, go to the
“My Security Credentials” page, located in the dropdown at the top:</p>
<p><img src="aws-security-credentials.png" alt="Location of the “My Security Credentials” page" /></p>
<p>Scroll down and click the “Assign MFA device” button. Choose “Virtual MFA
device” (which is classic TOTP) and configure it with your authenticator app.
Once you’re done, log out of the console and log in again to gain access to the
resources you’re authorized to use.</p>
<p>Do not choose “U2F security key”, even if you own one: due to limitations of
the AWS API, that would prevent you from using the CLI, restricting your access
to the console alone.</p>
<h2 id="using-the-aws-console"><a class="header" href="#using-the-aws-console">Using the AWS console</a></h2>
<p>The AWS console provides a visual interface to most of the resources in our AWS
account.</p>
<center>
<p><a href="https://rust-lang.signin.aws.amazon.com/console">Sign into the console.</a></p>
</center>
<h2 id="using-the-aws-cli"><a class="header" href="#using-the-aws-cli">Using the AWS CLI</a></h2>
<p>The <a href="https://aws.amazon.com/cli/">AWS CLI</a> allows you to interact with our AWS
account from a terminal or a script. To set it up the first time, follow
Amazon’s documentation to <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv1.html">install it</a> and <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">configure your
credentials</a>. The CLI doesn’t use your console password to
authenticate: you’ll need to create an access key from the “My Security
Credentials” page on the console.</p>
<h3 id="2-factor-authentication"><a class="header" href="#2-factor-authentication">2-factor authentication</a></h3>
<p>To ensure the security of our AWS account, 2-factor authentication is required
to interact with the CLI. The Infrastructure Team developed <a href="https://github.com/rust-lang/simpleinfra/blob/master/aws-creds.py">a
script</a> that eases the authentication process by creating a
temporary session validated with 2FA for the current shell. The session expires
in 12 hours, and it’s valid for an unlimited number of invocations.</p>
<p>To use the script, clone the <a href="https://github.com/rust-lang/simpleinfra">rust-lang/simpleinfra</a> repository in
a directory. Then, every time you need to use the AWS CLI run this command in
your shell:</p>
<pre><code>eval $(~/PATH/TO/SIMPLEINFRA/aws-creds.py)
</code></pre>
<p>That command will prompt you for your 2FA code, and it will set a few
environment variables in the current shell with the temporary credentials.
You’ll need to run the command again after 12 hours, or if you want the
credentials on another shell.</p>
<h3 id="plaintext-credentials"><a class="header" href="#plaintext-credentials">Plaintext credentials</a></h3>
<p>By default, AWS CLI stores your credentials (including the secret key) in the
<code>~/.aws/credentials</code> file, without any kind of encryption. While the danger of
having plaintext credentials stored in your home directory is partially
mitigated by the 2FA requirement, it’d be best not to store them anyway.</p>
<p>If you use a password manager with a CLI interface, an approach you can take to
avoid the problem is to store your credentials in the password manager, and
configure the CLI to <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sourcing-external.html">call your password manager</a> to fetch
the credentials when needed.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../infra/docs/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../infra/docs/aws-access-management.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../infra/docs/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../infra/docs/aws-access-management.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../js/moment.min.js"></script>
        <script src="../../js/index.js"></script>


    </div>
    </body>
</html>
